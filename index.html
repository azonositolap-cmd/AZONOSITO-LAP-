<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Azonos√≠t√≥ lap</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing: border-box; }

body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  padding: 20px;
}

.container {
  background: #fff;
  max-width: 900px;
  margin: auto;
  padding: 30px;
  border: 1px solid #ccc;
}

h2 {
  text-align: center;
  margin-bottom: 30px;
}

.top-info {
  display: flex;
  justify-content: space-between;
  margin-bottom: 25px;
  font-weight: bold;
}

label {
  font-weight: bold;
  display: block;
  margin-top: 18px;
}

input, select, textarea, canvas {
  width: 100%;
  margin-top: 6px;
}

input, select, textarea {
  padding: 10px;
  font-size: 15px;
}

textarea {
  min-height: 90px;
}

.row {
  display: flex;
  gap: 20px;
}

.row > div {
  flex: 1;
}

canvas {
  border: 1px solid #000;
  height: 150px;
  background: #fff;
}

button {
  margin-top: 30px;
  padding: 16px;
  width: 100%;
  font-size: 18px;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

<!-- üî¥ FONTOS: MINDEN, AMI A PDF-BE MEGY, EBEN VAN -->
<div class="container" id="pdf-content">

<h2>Azonos√≠t√≥ lap</h2>

<div class="top-info">
  <div>D√°tum: <span id="datum"></span></div>
  <div>√ârkeztet√©si sz√°m: <span id="erkszam"></span></div>
</div>

<label>Gazda neve</label>
<input id="gazdaNev" type="text">

<label>C√≠m</label>
<input id="cim" type="text">

<label>Telefonsz√°m</label>
<input type="tel">

<label>Megjegyz√©s</label>
<textarea></textarea>

<label>Al√°√≠r√°s</label>
<canvas id="signUser"></canvas>

<label>√úgyf√©l email c√≠me</label>
<input type="email" id="ugyfelEmail">

</div>

<button id="pdfBtn">PDF k√©sz√≠t√©s</button>

<script>
// d√°tum
const d = new Date();
const ds = `${d.getFullYear()}.${String(d.getMonth()+1).padStart(2,'0')}.${String(d.getDate()).padStart(2,'0')}`;
datum.innerText = ds;
erkszam.innerText = Date.now();

// al√°√≠r√°s
const canvas = document.getElementById("signUser");
const ctx = canvas.getContext("2d");
canvas.width = canvas.offsetWidth;
canvas.height = 150;
let draw=false;

canvas.addEventListener("mousedown",e=>{
  draw=true; ctx.beginPath(); ctx.moveTo(e.offsetX,e.offsetY);
});
canvas.addEventListener("mousemove",e=>{
  if(!draw) return;
  ctx.lineTo(e.offsetX,e.offsetY);
  ctx.stroke();
});
canvas.addEventListener("mouseup",()=>draw=false);

// f√°jln√©v tiszt√≠t√°s
function clean(s){
  return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/gi,"_");
}

// PDF
pdfBtn.onclick = async () => {
  const nev = clean(gazdaNev.value || "nev");
  const cimTxt = clean(cim.value || "cim");
  const fileName = `azonosito_lap_${ds}_${nev}_${cimTxt}.pdf`;

  await html2pdf()
    .from(document.getElementById("pdf-content"))
    .set({
      margin: 10,
      html2canvas: { scale: 2, scrollY: 0 },
      jsPDF: { unit: "mm", format: "a4" },
      filename: fileName
    })
    .save();
};
</script>

</body>
</html>
